<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpilSpil Admin Panel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #EE4D2D;
            --secondary-color: #2D4EEE;
            --success-color: #4CAF50;
            --danger-color: #f44336;
            --warning-color: #ff9800;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .menu-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s;
        }

        .menu-item:hover {
            transform: translateY(-5px);
        }

        .menu-item i {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: opacity 0.2s;
        }

        .btn:hover {
            opacity: 0.8;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-secondary {
            background: var(--secondary-color);
            color: white;
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .product-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .product-card {
            background: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .product-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 5px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        /* Tambahan style untuk login */
        .login-container {
            max-width: 400px;
            margin: 100px auto;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .login-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .error-message {
            color: var(--danger-color);
            margin-bottom: 10px;
            text-align: center;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div id="loginPage" class="login-container">
        <div class="login-header">
            <h1>SpilSpil Login</h1>
        </div>
        <div id="loginError" class="error-message hidden"></div>
        <form onsubmit="handleLogin(event)">
            <div class="form-group">
                <label>Username</label>
                <input type="text" id="username" required>
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="password" required>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%">Login</button>
        </form>
    </div>

    <div id="adminPanel" class="hidden">
        <div class="container">
            <div class="header">
                <h1>SpilSpil Admin Panel</h1>
            </div>

            <div class="menu">
                <div class="menu-item" onclick="showSection('products')">
                    <i class="fas fa-box"></i>
                    <h3>Kelola Produk</h3>
                </div>
                <div class="menu-item" onclick="showSection('add')">
                    <i class="fas fa-plus"></i>
                    <h3>Tambah Produk</h3>
                </div>
                <div class="menu-item" onclick="syncGithub()">
                    <i class="fab fa-github"></i>
                    <h3>Sinkronisasi GitHub</h3>
                </div>
            </div>

            <div class="content" id="mainContent">
                <!-- Konten dinamis akan dimuat di sini -->
            </div>
        </div>
    </div>

    <script>
        const ADMIN_USERNAME = 'admin';
        const ADMIN_PASSWORD = 'spilspil2024'; // Ganti dengan password yang lebih aman
        let isLoggedIn = false;

        function checkLoginStatus() {
            const token = localStorage.getItem('adminToken');
            if (token) {
                isLoggedIn = true;
                showAdminPanel();
            }
        }

        async function handleLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('loginError');

            if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
                const token = btoa(username + ':' + new Date().getTime());
                localStorage.setItem('adminToken', token);
                isLoggedIn = true;
                showAdminPanel();
                errorDiv.classList.add('hidden');
            } else {
                errorDiv.textContent = 'Username atau password salah!';
                errorDiv.classList.remove('hidden');
            }
        }

        function showAdminPanel() {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('adminPanel').classList.remove('hidden');
            showProducts();
        }

        function logout() {
            localStorage.removeItem('adminToken');
            isLoggedIn = false;
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('adminPanel').classList.add('hidden');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }

        const headerDiv = document.querySelector('.header');
        headerDiv.innerHTML += `
            <button onclick="logout()" class="btn btn-danger" style="float: right;">
                Logout
            </button>
        `;

        let productData = [];

        async function loadProducts() {
            if (!isLoggedIn) {
                return null;
            }
            try {
                const response = await fetch('data/config.json');
                const data = await response.json();
                productData = data.products;
                return data;
            } catch (error) {
                console.error('Error loading products:', error);
                return null;
            }
        }

        function showSection(section) {
            if (!isLoggedIn) return;
            const content = document.getElementById('mainContent');
            
            switch(section) {
                case 'products':
                    showProducts();
                    break;
                case 'add':
                    showAddForm();
                    break;
            }
        }

        async function showProducts() {
            const data = await loadProducts();
            if (!data) return;

            const content = document.getElementById('mainContent');
            content.innerHTML = `
                <h2>Daftar Produk</h2>
                <div class="product-list">
                    ${productData.map(product => `
                        <div class="product-card">
                            <img src="${product.image}" alt="${product.name}" 
                                 onerror="this.src='https://via.placeholder.com/300x300?text=Gambar+Tidak+Tersedia'">
                            <h3>${product.name}</h3>
                            <p>ID: ${product.id}</p>
                            <button class="btn btn-danger" onclick="removeProduct('${product.id}')">
                                Hapus
                            </button>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function showAddForm() {
            const content = document.getElementById('mainContent');
            content.innerHTML = `
                <h2>Tambah Produk Baru</h2>
                <form onsubmit="addProduct(event)">
                    <div class="form-group">
                        <label>ID Produk</label>
                        <input type="text" id="productId" required pattern="[0-9]{3}" 
                               placeholder="Masukkan 3 digit angka">
                    </div>
                    <div class="form-group">
                        <label>Nama Produk</label>
                        <input type="text" id="productName" required>
                    </div>
                    <div class="form-group">
                        <label>URL Gambar</label>
                        <input type="url" id="productImage" required>
                    </div>
                    <div class="form-group">
                        <label>Link Shopee</label>
                        <input type="url" id="productLink" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Tambah Produk</button>
                </form>
            `;
        }

        async function addProduct(event) {
            if (!isLoggedIn) return;
            event.preventDefault();
            
            const newProduct = {
                id: document.getElementById('productId').value,
                name: document.getElementById('productName').value,
                image: document.getElementById('productImage').value,
                link: document.getElementById('productLink').value
            };

            try {
                // Di sini Anda perlu menambahkan logika untuk menyimpan ke server
                alert('Fitur ini memerlukan implementasi backend');
            } catch (error) {
                console.error('Error adding product:', error);
                alert('Gagal menambahkan produk');
            }
        }

        async function removeProduct(id) {
            if (!isLoggedIn) return;
            if (confirm(`Yakin ingin menghapus produk dengan ID ${id}?`)) {
                try {
                    // Di sini Anda perlu menambahkan logika untuk menghapus dari server
                    alert('Fitur ini memerlukan implementasi backend');
                } catch (error) {
                    console.error('Error removing product:', error);
                    alert('Gagal menghapus produk');
                }
            }
        }

        async function syncGithub() {
            if (!isLoggedIn) return;
            try {
                // Di sini Anda perlu menambahkan logika untuk sinkronisasi dengan GitHub
                alert('Fitur ini memerlukan implementasi backend');
            } catch (error) {
                console.error('Error syncing with GitHub:', error);
                alert('Gagal sinkronisasi dengan GitHub');
            }
        }

        checkLoginStatus();
    </script>
</body>
</html> 